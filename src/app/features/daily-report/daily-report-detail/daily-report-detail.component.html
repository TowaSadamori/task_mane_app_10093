<div class="daily-report-detail-card" *ngIf="workLog; else loading">
  <h2>日次ログ詳細</h2>
  <div *ngIf="taskName" class="task-name-row">
    <span class="label">タスク名:</span>
    <span>{{ taskName }}</span>
  </div>
  <div class="detail-row"><span class="label">作業日:</span><span>{{ workLog.workDate?.toDate() | date:'yyyy/MM/dd' }}</span></div>
  <div *ngIf="managerNames" class="manager-names-row">
    <span class="label">管理者:</span>
    <span>{{ managerNames }}</span>
  </div>
  <div class="detail-row"><span class="label">担当者:</span><span>{{ workLog.supervisor }}</span></div>
  <div class="detail-row"><span class="label">開始時刻:</span><span>{{ workLog.actualStartTime }}</span></div>
  <div class="detail-row"><span class="label">終了時刻:</span><span>{{ workLog.actualEndTime }}</span></div>
  <div class="detail-row"><span class="label">休憩(分):</span><span>{{ workLog.actualBreakTime }}</span></div>
  <div class="detail-row"><span class="label">進捗率:</span><span>{{ workLog.progressRate }}%</span></div>
  <div class="detail-row"><span class="label">作業員数:</span><span>{{ workLog.workerCount }}</span></div>
  <div class="detail-row"><span class="label">コメント:</span><span>{{ workLog.comment }}</span></div>
  <div class="detail-row">
    <span class="label">写真:</span>
    <span>
      <ng-container *ngIf="workLog.photoUrls?.length; else noPhoto">
        <span *ngFor="let url of workLog.photoUrls" class="photo-thumb">
          <img [src]="url" alt="作業写真" />
          <button class="download-btn" type="button" (click)="downloadPhoto(url)" aria-label="ダウンロード">
            ⬇️
          </button>
        </span>
      </ng-container>
      <ng-template #noPhoto>なし</ng-template>
    </span>
  </div>
  <button *ngIf="ganttTaskId" (click)="navigateToTaskDetail()" class="back-btn">
    タスク詳細画面へ戻る
  </button>
  <button *ngIf="workLog && ganttTaskId" (click)="editDailyLog()" mat-icon-button class="edit-btn" aria-label="編集">
    <mat-icon>edit</mat-icon>
  </button>
  <button *ngIf="workLog && ganttTaskId" (click)="deleteDailyLog()" mat-icon-button color="warn" class="delete-btn" aria-label="削除">
    <mat-icon>delete</mat-icon>
  </button>
</div>
<ng-template #loading>
  <p>読み込み中...</p>
</ng-template>
